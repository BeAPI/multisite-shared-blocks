(()=>{"use strict";const e=window.wp.hooks;function t(e){var t;return!(null!==(t=multisiteSharedBlocksHooksData.excluded_blocks)&&void 0!==t?t:[]).includes(e)}const o=window.React,r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let l;const n=new Uint8Array(16);function c(){if(!l&&(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(n)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const i=function(e,t,o){if(r.randomUUID&&!t&&!e)return r.randomUUID();const l=(e=e||{}).random||(e.rng||c)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=l[e];return t}return function(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}(l)},a=window.wp.element,d=window.wp.compose,h=(0,d.createHigherOrderComponent)((e=>class extends a.Component{componentDidMount(){const{name:e,setAttributes:o,attributes:{sharedBlockId:r}=!1}=this.props;t(e)&&!r&&o({sharedBlockId:i()})}render(){return(0,o.createElement)(e,{...this.props})}}),"sharedBlockIdComponent"),u=window.wp.blockEditor,m=window.wp.components,p=window.wp.wordcount,k=window.wp.i18n,w=window.wp.primitives,b=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{fill:"#000",fillRule:"evenodd",d:"M14.247 0H9.753c-.715 0-1.327.647-1.327 1.402V4.8c0 .755.612 1.402 1.327 1.402h1.736v2.034c-1.599.242-2.857 1.601-3.04 3.306h-1.3v-1.295c0-.755-.613-1.402-1.328-1.402H1.328C.613 8.845 0 9.492 0 10.247v3.398c0 .755.613 1.402 1.328 1.402H5.82c.715 0 1.328-.647 1.328-1.402V12.62h1.329c.262 1.602 1.48 2.859 3.011 3.09v2.088H9.753c-.715 0-1.327.647-1.327 1.402v3.398c0 .755.612 1.402 1.327 1.402h4.494c.715 0 1.328-.647 1.328-1.402V19.2c0-.809-.613-1.402-1.328-1.402H12.51V15.71c1.53-.231 2.75-1.488 3.011-3.09h1.329v1.025c0 .755.613 1.402 1.328 1.402h4.493c.715 0 1.328-.647 1.328-1.402v-3.398c0-.755-.613-1.402-1.328-1.402H18.18c-.715 0-1.328.647-1.328 1.402v1.295h-1.3c-.183-1.705-1.441-3.064-3.04-3.306V6.202h1.736c.715 0 1.328-.647 1.328-1.402V1.402C15.575.593 14.962 0 14.247 0Zm.306 4.746c0 .162-.153.324-.306.324H9.753c-.153 0-.306-.162-.306-.324V1.402c0-.162.153-.323.306-.323h4.494c.153 0 .306.108.306.323v3.344ZM12 9.276c-1.41 0-2.553 1.208-2.553 2.697 0 1.49 1.143 2.697 2.553 2.697s2.553-1.208 2.553-2.697c0-1.49-1.143-2.697-2.553-2.697Zm10.979 4.369c0 .162-.153.324-.307.324H18.18c-.153 0-.307-.162-.307-.324v-3.398c0-.162.154-.323.307-.323h4.493c.154 0 .307.161.307.323v3.398Zm-17.158.324c.153 0 .307-.162.307-.324v-3.398c0-.162-.154-.323-.307-.323H1.328c-.154 0-.307.161-.307.323v3.398c0 .162.153.324.307.324H5.82Zm8.426 8.898c.153 0 .306-.161.306-.323v-3.398c0-.162-.153-.323-.306-.323H9.753c-.153 0-.306.161-.306.323v3.398c0 .162.153.323.306.323h4.494Z",clipRule:"evenodd"})),g=(0,d.createHigherOrderComponent)((e=>r=>{const{name:l,attributes:n,setAttributes:c}=r,{sharedBlockId:s,sharedBlockIsShared:i,sharedBlockShareTitle:d}=n,h=!!(d&&d.length>0);return t(l)?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(e,{...r}),(0,o.createElement)(u.InspectorControls,null,(0,o.createElement)(m.PanelBody,{title:(0,k.__)("Multisite sharing options","multisite-shared-blocks"),icon:b},(0,o.createElement)(m.ToggleControl,{label:(0,k.__)("Share the block on the network","multisite-shared-blocks"),help:(0,k.__)("This block will be available on all sites of the network.","multisite-shared-blocks"),checked:i,onChange:()=>{c({sharedBlockIsShared:!i})}}),!!i&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(m.TextControl,{label:(0,k.sprintf)(
// translators: %d is the current number of characters of the title
(0,k.__)("Public title for the shared block (%d/200)","multisite-shared-blocks"),h?(w=d,w&&w.length>0?(0,p.count)(w,"characters_including_spaces",{}):0):0),value:d,onChange:e=>{c({sharedBlockShareTitle:e})},help:(0,k.__)("Try to choose a title as descriptive as possible that will allow other users to understand what the block is about (200 characteres max).","multisite-shared-blocks")}),!h&&(0,o.createElement)("p",null,(0,o.createElement)("small",null,(0,a.createInterpolateElement)((0,k.sprintf)(
// translators: %s is default title
(0,k.__)('Current title for the shared block is empty, it\'ll be view has <strong>"%s"</strong>',"multisite-shared-blocks"),(0,k.sprintf)(
// translators: %s share block unique id
(0,k.__)("Shared block %s","multisite-shared-blocks"),s)),{strong:(0,o.createElement)("strong",null)}))))))):(0,o.createElement)(e,{...r});var w}),"sharedBlockIdControls");(0,e.addFilter)("blocks.registerBlockType","multisite-shared-blocks/shared-block-id-attribute",((e,o)=>{const r=multisiteSharedBlocksHooksData.attributes||{};return t(o)&&0!==Object.keys(r).length?{...e,attributes:{...e.attributes,...r}}:e})),(0,e.addFilter)("editor.BlockEdit","multisite-shared-blocks/shared-block-id",h),(0,e.addFilter)("editor.BlockEdit","multisite-shared-blocks/shared-block-id-controls",g)})();