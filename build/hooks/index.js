!function(){"use strict";var e=window.wp.hooks,t=window.lodash;function r(e){var t;return!(null!==(t=multisiteSharedBlocksHooksData.excluded_blocks)&&void 0!==t?t:[]).includes(e)}var o,s=window.wp.element,n=new Uint8Array(16);function l(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(n)}for(var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&i.test(e)},c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1));var h=function(e,t,r){var o=(e=e||{}).random||(e.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=o[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r}(o)},u=window.wp.compose,m=(0,u.createHigherOrderComponent)((e=>class extends s.Component{componentDidMount(){const{name:e,setAttributes:t,attributes:{sharedBlockId:o}=!1}=this.props;r(e)&&!o&&t({sharedBlockId:h()})}render(){return(0,s.createElement)(e,this.props)}}),"sharedBlockIdComponent"),p=window.wp.blockEditor,w=window.wp.components,b=window.wp.wordcount,k=window.wp.i18n,v=window.wp.primitives,f=(0,s.createElement)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},(0,s.createElement)(v.Path,{fill:"#000","fill-rule":"evenodd",d:"M14.247 0H9.753c-.715 0-1.327.647-1.327 1.402V4.8c0 .755.612 1.402 1.327 1.402h1.736v2.034c-1.599.242-2.857 1.601-3.04 3.306h-1.3v-1.295c0-.755-.613-1.402-1.328-1.402H1.328C.613 8.845 0 9.492 0 10.247v3.398c0 .755.613 1.402 1.328 1.402H5.82c.715 0 1.328-.647 1.328-1.402V12.62h1.329c.262 1.602 1.48 2.859 3.011 3.09v2.088H9.753c-.715 0-1.327.647-1.327 1.402v3.398c0 .755.612 1.402 1.327 1.402h4.494c.715 0 1.328-.647 1.328-1.402V19.2c0-.809-.613-1.402-1.328-1.402H12.51V15.71c1.53-.231 2.75-1.488 3.011-3.09h1.329v1.025c0 .755.613 1.402 1.328 1.402h4.493c.715 0 1.328-.647 1.328-1.402v-3.398c0-.755-.613-1.402-1.328-1.402H18.18c-.715 0-1.328.647-1.328 1.402v1.295h-1.3c-.183-1.705-1.441-3.064-3.04-3.306V6.202h1.736c.715 0 1.328-.647 1.328-1.402V1.402C15.575.593 14.962 0 14.247 0Zm.306 4.746c0 .162-.153.324-.306.324H9.753c-.153 0-.306-.162-.306-.324V1.402c0-.162.153-.323.306-.323h4.494c.153 0 .306.108.306.323v3.344ZM12 9.276c-1.41 0-2.553 1.208-2.553 2.697 0 1.49 1.143 2.697 2.553 2.697s2.553-1.208 2.553-2.697c0-1.49-1.143-2.697-2.553-2.697Zm10.979 4.369c0 .162-.153.324-.307.324H18.18c-.153 0-.307-.162-.307-.324v-3.398c0-.162.154-.323.307-.323h4.493c.154 0 .307.161.307.323v3.398Zm-17.158.324c.153 0 .307-.162.307-.324v-3.398c0-.162-.154-.323-.307-.323H1.328c-.154 0-.307.161-.307.323v3.398c0 .162.153.324.307.324H5.82Zm8.426 8.898c.153 0 .306-.161.306-.323v-3.398c0-.162-.153-.323-.306-.323H9.753c-.153 0-.306.161-.306.323v3.398c0 .162.153.323.306.323h4.494Z","clip-rule":"evenodd"})),g=(0,u.createHigherOrderComponent)((e=>o=>{const{name:n,attributes:l,setAttributes:i}=o,{sharedBlockId:a,sharedBlockIsShared:c,sharedBlockShareTitle:d}=l;return r(n)?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(e,o),(0,s.createElement)(p.InspectorControls,null,(0,s.createElement)(w.PanelBody,{title:(0,k.__)("Multisite sharing options","multisite-shared-blocks"),icon:f},(0,s.createElement)(w.ToggleControl,{label:(0,k.__)("Share the block on the network","multisite-shared-blocks"),help:(0,k.__)("This block will be available on all sites of the network.","multisite-shared-blocks"),checked:c,onChange:()=>{i({sharedBlockIsShared:!c})}}),!!c&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(w.TextControl,{label:(0,k.sprintf)(// translators: %d is the current number of characters of the title
(0,k.__)("Public title for the shared block (%d/200)","multisite-shared-blocks"),(h=d,(0,t.isEmpty)(h)?"0":(0,b.count)(d,"characters_including_spaces",{}))),value:d,onChange:e=>{i({sharedBlockShareTitle:e})},help:(0,k.__)("Try to choose a title as descriptive as possible that will allow other users to understand what the block is about (200 characteres max).","multisite-shared-blocks")}),(0,t.isEmpty)(d)&&(0,s.createElement)("p",null,(0,s.createElement)("small",null,(0,s.createInterpolateElement)((0,k.sprintf)(// translators: %s is default title
(0,k.__)('Current title for the shared block is empty, it\'ll be view has <strong>"%s"</strong>',"multisite-shared-blocks"),(0,k.sprintf)(// translators: %s share block unique id
(0,k.__)("Shared block %s","multisite-shared-blocks"),a)),{strong:(0,s.createElement)("strong",null)}))))))):(0,s.createElement)(e,o);var h}),"sharedBlockIdControls");(0,e.addFilter)("blocks.registerBlockType","multisite-shared-blocks/shared-block-id-attribute",((e,o)=>{const s=multisiteSharedBlocksHooksData.attributes||{};return!r(o)||(0,t.isEmpty)(s)?e:(0,t.assign)({},e,{attributes:(0,t.assign)({},e.attributes,s)})})),(0,e.addFilter)("editor.BlockEdit","multisite-shared-blocks/shared-block-id",m),(0,e.addFilter)("editor.BlockEdit","multisite-shared-blocks/shared-block-id-controls",g)}();